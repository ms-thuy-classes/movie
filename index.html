<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn English with Ms. Th√∫y</title>
    <style>
        :root {
            --pastel-pink: #ffd1dc;
            --deep-pink: #ffafbd;
            --accent-pink: #ff8fa3;
            --text-color: #5d5d5d;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--pastel-pink), var(--deep-pink));
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        h1 {
            margin: 0;
            color: #d84361;
            font-size: 2.5em;
            text-shadow: 1px 1px 2px white;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .video-section {
            position: sticky;
            top: 20px;
        }

        .video-container {
            border: 8px solid white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            background: #000;
        }

        .transcript-section {
            background: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 20px;
            height: 70vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            scroll-behavior: smooth;
        }

        .sentence {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            transition: all 0.3s ease;
            line-height: 1.6;
            font-size: 1.1em;
            border-left: 5px solid transparent;
        }

        .sentence.active {
            background: white;
            border-left: 5px solid var(--accent-pink);
            transform: translateX(10px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        input[type="text"] {
            border: none;
            border-bottom: 2px solid var(--accent-pink);
            background: transparent;
            width: 120px;
            text-align: center;
            font-weight: bold;
            color: #d84361;
            outline: none;
        }

        .keyword-hint {
            font-size: 0.8em;
            color: #888;
            display: block;
            margin-top: 5px;
        }

        /* T√πy ch·ªânh thanh cu·ªôn */
        .transcript-section::-webkit-scrollbar {
            width: 8px;
        }
        .transcript-section::-webkit-scrollbar-thumb {
            background: var(--accent-pink);
            border-radius: 10px;
        }

        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
            .video-section { position: relative; }
        }
    </style>
</head>
<body>

<header>
    <h1>üå∏ Learn English with Ms. Th√∫y üå∏</h1>
    <p>Ch·ªß ƒë·ªÅ: T·∫°i sao ch√∫ng ta mu·ªën "n·ª±ng" nh·ªØng th·ª© d·ªÖ th∆∞∆°ng?</p>
</header>

<div class="container">
    <div class="video-section">
        <div class="video-container">
            <div id="player"></div>
        </div>
        <div style="margin-top: 20px; text-align: center;">
            <p><i>G·ª£i √Ω: Video s·∫Ω t·ª± ƒë·ªông d·ª´ng ·ªü nh·ªØng c√¢u c√≥ l·ªó tr·ªëng. <br>H√£y ƒëi·ªÅn t·ª´ v√† b·∫•m Play ƒë·ªÉ ti·∫øp t·ª•c!</i></p>
        </div>
    </div>

    <div class="transcript-section" id="transcript-container">
        </div>
</div>

<script>
    // 1. D·ªØ li·ªáu b√†i h·ªçc d·ª±a tr√™n file .srt c·ªßa b·∫°n
    // Focus v√†o c√°c t·ª´ v·ª±ng Academic/IELTS (ƒë√£ ƒë·ª•c l·ªó)
    const transcriptData = [
        { start: 7, end: 10, text: "Watching a kitten fumbling around," },
        { start: 10, end: 18, text: "it might feel as if you‚Äôve never <input type='text' data-answer='encountered'> anything so devastatingly adorable.", hint: "V·∫•p ph·∫£i/B·∫Øt g·∫∑p (IELTS Level)" },
        { start: 19, end: 24, text: "You may want to pet its soft fur and kiss its tiny head." },
        { start: 25, end: 35, text: "But you may also feel the <input type='text' data-answer='conflicting'> urge to squeeze or smush the kitten.", hint: "ƒê·ªëi l·∫≠p/M√¢u thu·∫´n" },
        { start: 36, end: 40, text: "However, you don‚Äôt. And you might be <input type='text' data-answer='appalled'> by yourself.", hint: "Kinh h√£i/S·ªëc" },
        { start: 40, end: 51, text: "But this urge, which psychologists call ‚Äúcute aggression,‚Äù is a common <input type='text' data-answer='phenomenon'>.", hint: "Hi·ªán t∆∞·ª£ng" },
        { start: 58, end: 111, text: "In 1943, one scientist identified key <input type='text' data-answer='features'> associated with cuteness.", hint: "ƒê·∫∑c ƒëi·ªÉm" },
        { start: 111, end: 119, text: "These characteristics were placed in <input type='text' data-answer='opposition'> with those perceived as less cute.", hint: "S·ª± ƒë·ªëi l·∫≠p" },
        { start: 140, end: 144, text: "Photos appear to <input type='text' data-answer='stimulate'> brain regions associated with reward.", hint: "K√≠ch th√≠ch" },
        { start: 220, end: 225, text: "One theory is that cute things simply make us want to <input type='text' data-answer='nurture'> them.", hint: "Nu√¥i d∆∞·ª°ng/ChƒÉm s√≥c (IELTS Topic: Family)" },
        { start: 298, end: 303, text: "Animals appear to have gradually adopted more <input type='text' data-answer='juvenile'> features.", hint: "V·ªã th√†nh ni√™n/Tr·∫ª con" }
    ];

    // 2. YouTube IFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '315',
            width: '100%',
            videoId: 'yxsoE3jO8HM',
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        renderTranscript();
        setInterval(updateHighlight, 500);
    }

    function onPlayerStateChange(event) {
        // C√≥ th·ªÉ th√™m logic x·ª≠ l√Ω khi video d·ª´ng/ph√°t ·ªü ƒë√¢y
    }

    // 3. Hi·ªÉn th·ªã Transcript
    function renderTranscript() {
        const container = document.getElementById('transcript-container');
        transcriptData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'sentence';
            div.id = `s-${index}`;
            div.innerHTML = `
                ${item.text}
                ${item.hint ? `<span class="keyword-hint">(${item.hint})</span>` : ''}
            `;
            container.appendChild(div);
        });
    }

    // 4. Logic Highlight v√† T·ª± ƒë·ªông d·ª´ng (Pause)
    let lastActiveIndex = -1;
    let pausedIndices = new Set(); // ƒê·ªÉ tr√°nh d·ª´ng li√™n t·ª•c 1 ch·ªó

    function updateHighlight() {
        const currentTime = player.getCurrentTime();
        
        transcriptData.forEach((item, index) => {
            if (currentTime >= item.start && currentTime <= item.end) {
                if (lastActiveIndex !== index) {
                    // X√≥a class active c≈©
                    document.querySelectorAll('.sentence').forEach(s => s.classList.remove('active'));
                    
                    // Th√™m class active m·ªõi
                    const currentEl = document.getElementById(`s-${index}`);
                    currentEl.classList.add('active');
                    
                    // Cu·ªôn l√™n tr√™n
                    currentEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // N·∫øu c√¢u c√≥ input v√† ch∆∞a b·ªã d·ª´ng l·∫ßn n√†o, th√¨ t·∫°m d·ª´ng video
                    if (item.text.includes('input') && !pausedIndices.has(index)) {
                        player.pauseVideo();
                        pausedIndices.add(index);
                    }
                    
                    lastActiveIndex = index;
                }
            }
        });
    }
</script>

</body>
</html>
