<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms. Th√∫y - English Learning Center</title>
    <style>
        :root {
            --pastel-pink: #ffd1dc;
            --deep-pink: #ffafbd;
            --accent-pink: #ff8fa3;
            --text-color: #4a4a4a;
            --success: #27ae60;
            --danger: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--pastel-pink), var(--deep-pink));
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .container {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 25px;
            max-width: 1500px;
            margin: 0 auto;
        }

        /* --- C·ªôt Video & B·∫£ng ƒëi·ªÉm --- */
        .video-section {
            position: sticky;
            top: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            border: 8px solid white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .video-container iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        /* B·∫£ng ƒëi·ªÉm n·ªïi b·∫≠t */
        #result-board {
            display: none; /* ·∫®n l√∫c ƒë·∫ßu */
            background: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border: 3px solid var(--accent-pink);
            animation: slideIn 0.5s ease-out;
        }

        .score-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #d84361;
            margin: 10px 0;
        }

        .score-detail {
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        /* --- C·ªôt Transcript --- */
        .transcript-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: 25px;
            height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            scroll-behavior: smooth;
        }

        .sentence {
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.5);
            transition: 0.3s;
            line-height: 2.2;
            border-left: 6px solid transparent;
        }

        .sentence.active {
            background: white;
            border-left: 6px solid var(--accent-pink);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        /* √î nh·∫≠p li·ªáu */
        .input-group {
            display: inline-block;
            position: relative;
            margin: 0 5px;
        }

        input[type="text"] {
            border: none;
            border-bottom: 2px solid var(--accent-pink);
            background: #fff0f3;
            width: 140px;
            text-align: center;
            font-size: 1em;
            font-weight: bold;
            color: #d84361;
            outline: none;
            border-radius: 5px 5px 0 0;
        }

        input.correct { background-color: #d4edda !important; color: var(--success) !important; border-bottom-color: var(--success); }
        input.wrong { background-color: #f8d7da !important; color: var(--danger) !important; border-bottom-color: var(--danger); }

        .correct-key {
            display: none;
            font-size: 0.8em;
            color: var(--danger);
            font-weight: bold;
            text-transform: uppercase;
            position: absolute;
            bottom: -22px;
            left: 0;
            width: 100%;
        }

        .hint-text {
            display: block;
            font-size: 0.85em;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 5px;
            line-height: 1.4;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        button {
            padding: 15px 30px;
            border-radius: 30px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .btn-check { background: #d84361; color: white; font-size: 1.1em; }
        .btn-check:hover { background: #b7324d; transform: scale(1.05); }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 1000px) {
            .container { grid-template-columns: 1fr; }
            .video-section { position: relative; }
        }
    </style>
</head>
<body>

<header>
    <h1>üå∏ Learn English with Ms. Th√∫y üå∏</h1>
    <p>B√†i t·∫≠p ƒë·ª•c l·ªó IELTS: <b>Science of Cuteness</b></p>
</header>

<div class="container">
    <div class="video-section">
        <div class="video-container">
            <div id="player"></div>
        </div>

        <div id="result-board">
            <h3>üéâ K·∫æT QU·∫¢ C·ª¶A B·∫†N üéâ</h3>
            <div class="score-number" id="final-score">0 / 0</div>
            <div class="score-detail" id="score-percentage">0%</div>
            <div id="motivational-msg">C·ªë g·∫Øng l√™n nh√©!</div>
        </div>

        <div class="controls">
            <button class="btn-check" onclick="calculateResult()">N·ªòP B√ÄI & KI·ªÇM TRA</button>
            <button style="background: white;" onclick="location.reload()">L√ÄM L·∫†I</button>
        </div>
    </div>

    <div class="transcript-section" id="transcript-list">
        </div>
</div>

<script>
    const data = [
        { s: 7, e: 10, t: "Watching a kitten <div class='input-group'><input type='text' data-ans='fumbling'><span class='correct-key'></span></div> around,", h: "l√≥ng ng√≥ng, v·ª•ng v·ªÅ" },
        { s: 10, e: 18, t: "it might feel as if you‚Äôve never <div class='input-group'><input type='text' data-ans='encountered'><span class='correct-key'></span></div> anything so <div class='input-group'><input type='text' data-ans='devastatingly'><span class='correct-key'></span></div> adorable in your <div class='input-group'><input type='text' data-ans='mortal'><span class='correct-key'></span></div> life.", h: "ch·∫°m tr√°n - t·ªôt c√πng - tr·∫ßn th·∫ø" },
        { s: 25, e: 35, t: "But you may also feel the <div class='input-group'><input type='text' data-ans='conflicting'><span class='correct-key'></span></div> <div class='input-group'><input type='text' data-ans='urge'><span class='correct-key'></span></div> to <div class='input-group'><input type='text' data-ans='squeeze'><span class='correct-key'></span></div> or smush the kitten.", h: "m√¢u thu·∫´n - s·ª± th√¥i th√∫c - n·ª±ng/b√≥p" },
        { s: 36, e: 40, t: "However, you don‚Äôt. And you might be <div class='input-group'><input type='text' data-ans='appalled'><span class='correct-key'></span></div> by yourself.", h: "kinh h√£i, s·ªëc" },
        { s: 40, e: 51, t: "But this urge, which psychologists call ‚Äúcute aggression,‚Äù is a common <div class='input-group'><input type='text' data-ans='phenomenon'><span class='correct-key'></span></div> <div class='input-group'><input type='text' data-ans='estimated'><span class='correct-key'></span></div> to <div class='input-group'><input type='text' data-ans='affect'><span class='correct-key'></span></div> adults.", h: "hi·ªán t∆∞·ª£ng - ∆∞·ªõc t√≠nh - ·∫£nh h∆∞·ªüng" },
        { s: 52, e: 57, t: "To better understand this <div class='input-group'><input type='text' data-ans='peculiar'><span class='correct-key'></span></div> case, let's start with what cuteness is.", h: "k·ª≥ l·∫°, ri√™ng bi·ªát" },
        { s: 58, e: 67, t: "In 1943, one scientist created a baby <div class='input-group'><input type='text' data-ans='schema'><span class='correct-key'></span></div> that <div class='input-group'><input type='text' data-ans='identified'><span class='correct-key'></span></div> key <div class='input-group'><input type='text' data-ans='features'><span class='correct-key'></span></div>.", h: "l∆∞·ª£c ƒë·ªì - x√°c ƒë·ªãnh - ƒë·∫∑c ƒëi·ªÉm" },
        { s: 71, e: 79, t: "These <div class='input-group'><input type='text' data-ans='characteristics'><span class='correct-key'></span></div> were placed in <div class='input-group'><input type='text' data-ans='opposition'><span class='correct-key'></span></div> with those <div class='input-group'><input type='text' data-ans='perceived'><span class='correct-key'></span></div> as less cute.", h: "ƒë·∫∑c t√≠nh - s·ª± ƒë·ªëi l·∫≠p - nh·∫≠n th·ª©c" },
        { s: 80, e: 87, t: "Decades of study have since <div class='input-group'><input type='text' data-ans='indicated'><span class='correct-key'></span></div> that this schema <div class='input-group'><input type='text' data-ans='reliably'><span class='correct-key'></span></div> tracks with us.", h: "ch·ªâ ra - ƒë√°ng tin c·∫≠y" },
        { s: 92, e: 104, t: "When <div class='input-group'><input type='text' data-ans='participants'><span class='correct-key'></span></div> see images, they <div class='input-group'><input type='text' data-ans='tend'><span class='correct-key'></span></div> to look at them longer.", h: "ng∆∞·ªùi tham gia - c√≥ xu h∆∞·ªõng" },
        { s: 105, e: 115, t: "Photos appear to <div class='input-group'><input type='text' data-ans='stimulate'><span class='correct-key'></span></div> brain regions. Cuteness <div class='input-group'><input type='text' data-ans='influences'><span class='correct-key'></span></div> behavior.", h: "k√≠ch th√≠ch - ·∫£nh h∆∞·ªüng" },
        { s: 121, e: 135, t: "Cuteness <div class='input-group'><input type='text' data-ans='hijacks'><span class='correct-key'></span></div> our emotions. It is not lost on <div class='input-group'><input type='text' data-ans='advertisers'><span class='correct-key'></span></div>.", h: "kh·ªëng ch·∫ø - nh√† qu·∫£ng c√°o" },
        { s: 135, e: 145, t: "One <div class='input-group'><input type='text' data-ans='theory'><span class='correct-key'></span></div> is that cute things make us want to <div class='input-group'><input type='text' data-ans='nurture'><span class='correct-key'></span></div> them.", h: "l√Ω thuy·∫øt - nu√¥i d∆∞·ª°ng" },
        { s: 146, e: 154, t: "Human babies are <div class='input-group'><input type='text' data-ans='relatively'><span class='correct-key'></span></div> helpless, evolution <div class='input-group'><input type='text' data-ans='favored'><span class='correct-key'></span></div> cuteness.", h: "t∆∞∆°ng ƒë·ªëi - ∆∞u √°i" },
        { s: 155, e: 165, t: "We are <div class='input-group'><input type='text' data-ans='acutely'><span class='correct-key'></span></div> sensitive and <div class='input-group'><input type='text' data-ans='tuned'><span class='correct-key'></span></div> into similar features.", h: "c·ª±c k·ª≥ - nh·∫°y b√©n" },
        { s: 165, e: 171, t: "As we <div class='input-group'><input type='text' data-ans='domesticated'><span class='correct-key'></span></div> animals, their appearances changed.", h: "thu·∫ßn h√≥a" },
        { s: 181, e: 196, t: "Animals adopted <div class='input-group'><input type='text' data-ans='juvenile'><span class='correct-key'></span></div> features and became <div class='input-group'><input type='text' data-ans='docile'><span class='correct-key'></span></div>. This is <div class='input-group'><input type='text' data-ans='regulated'><span class='correct-key'></span></div> by ph√¥i thai.", h: "tr·∫ª con - d·ªÖ b·∫£o - ƒëi·ªÅu ch·ªânh" },
        { s: 255, e: 265, t: "Physical characteristics <div class='input-group'><input type='text' data-ans='distinguish'><span class='correct-key'></span></div> us from cousins.", h: "ph√¢n bi·ªát" },
        { s: 271, e: 289, t: "It's not <div class='input-group'><input type='text' data-ans='linked'><span class='correct-key'></span></div> to harm, but results from <div class='input-group'><input type='text' data-ans='emotional'><span class='correct-key'></span></div> <div class='input-group'><input type='text' data-ans='overload'><span class='correct-key'></span></div>.", h: "li√™n quan - c·∫£m x√∫c - qu√° t·∫£i" },
        { s: 290, e: 309, t: "It is the brain's way of <div class='input-group'><input type='text' data-ans='regulating'><span class='correct-key'></span></div> <div class='input-group'><input type='text' data-ans='overwhelming'><span class='correct-key'></span></div> feelings.", h: "ƒëi·ªÅu ch·ªânh - tr√†n ng·∫≠p" },
        { s: 310, e: 327, t: "Cuteness <div class='input-group'><input type='text' data-ans='wields'><span class='correct-key'></span></div> immense, <div class='input-group'><input type='text' data-ans='consequential'><span class='correct-key'></span></div> power.", h: "n·∫Øm gi·ªØ - h·ªá tr·ªçng" }
    ];

    // YouTube API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.getElementsByTagName('head')[0].appendChild(tag);

    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: 'yxsoE3jO8HM',
            events: { 'onReady': startApp }
        });
    }

    function startApp() {
        render();
        setInterval(sync, 400);
    }

    function render() {
        const list = document.getElementById('transcript-list');
        data.forEach((item, i) => {
            const div = document.createElement('div');
            div.className = 'sentence';
            div.id = 'sen-' + i;
            div.innerHTML = `${item.t} <div class='hint-text'>Nghƒ©a: ${item.h}</div>`;
            list.appendChild(div);
        });
    }

    let lastIdx = -1;
    let stopList = new Set();

    function sync() {
        let curr = player.getCurrentTime();
        data.forEach((item, i) => {
            if (curr >= item.s && curr <= item.e) {
                if (lastIdx !== i) {
                    document.querySelectorAll('.sentence').forEach(el => el.classList.remove('active'));
                    const activeEl = document.getElementById('sen-' + i);
                    activeEl.classList.add('active');
                    activeEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    if (item.t.includes('input') && !stopList.has(i)) {
                        player.pauseVideo();
                        stopList.add(i);
                    }
                    lastIdx = i;
                }
            }
        });
    }

    function calculateResult() {
        const inputs = document.querySelectorAll('input');
        let correct = 0;
        let total = inputs.length;

        inputs.forEach(input => {
            let user = input.value.trim().toLowerCase();
            let ans = input.getAttribute('data-ans').toLowerCase();
            let keyLabel = input.nextElementSibling;

            if (user === ans) {
                input.className = 'correct';
                keyLabel.style.display = 'none';
                correct++;
            } else {
                input.className = 'wrong';
                keyLabel.innerText = "Key: " + ans;
                keyLabel.style.display = 'block';
            }
        });

        // Hi·ªán b·∫£ng ƒëi·ªÉm
        const board = document.getElementById('result-board');
        board.style.display = 'block';
        document.getElementById('final-score').innerText = `${correct} / ${total}`;
        let percent = Math.round((correct / total) * 100);
        document.getElementById('score-percentage').innerText = percent + "%";
        
        const msg = document.getElementById('motivational-msg');
        if(percent >= 80) msg.innerText = "Tuy·ªát v·ªùi! B·∫°n l√† cao th·ªß IELTS!";
        else if(percent >= 50) msg.innerText = "Kh√° l·∫Øm! C·ªë g·∫Øng th√™m ch√∫t n·ªØa nh√©!";
        else msg.innerText = "ƒê·ª´ng n·∫£n ch√≠, h√£y nghe l·∫°i m·ªôt l·∫ßn n·ªØa!";

        board.scrollIntoView({ behavior: 'smooth' });
    }
</script>
</body>
</html>
