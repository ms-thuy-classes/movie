<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn English with Ms. Th√∫y - IELTS Vocabulary</title>
    <style>
        :root {
            --pastel-pink: #ffd1dc;
            --deep-pink: #ffafbd;
            --accent-pink: #ff8fa3;
            --text-color: #4a4a4a;
            --success-green: #2ecc71;
            --error-red: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--pastel-pink), var(--deep-pink));
            color: var(--text-color);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        h1 { margin: 0; color: #d84361; font-size: 2.2em; }

        .container {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 20px;
            max-width: 1500px;
            margin: 0 auto;
        }

        .video-section {
            position: sticky;
            top: 10px;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            border: 10px solid white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            background: #000;
        }

        .video-container iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        .transcript-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 25px;
            height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            scroll-behavior: smooth;
        }

        .sentence {
            padding: 18px;
            margin: 12px 0;
            border-radius: 15px;
            transition: all 0.4s ease;
            line-height: 2;
            border-left: 6px solid transparent;
            background: rgba(255, 255, 255, 0.5);
        }

        .sentence.active {
            background: white;
            border-left: 6px solid var(--accent-pink);
            transform: scale(1.01);
        }

        .input-wrapper {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
        }

        input[type="text"] {
            border: none;
            border-bottom: 2.5px solid var(--accent-pink);
            background: #fff0f3;
            width: 140px;
            text-align: center;
            font-weight: bold;
            color: #d84361;
            outline: none;
            padding: 2px;
            margin: 0 5px;
        }

        input.correct {
            background: var(--success-green) !important;
            color: white !important;
            border-bottom-color: transparent;
        }

        input.incorrect {
            background: #ffe6e6 !important;
            border-bottom-color: var(--error-red);
        }

        .correct-answer-label {
            display: block;
            font-size: 0.75em;
            color: var(--error-red);
            font-weight: bold;
            margin-top: -5px;
        }

        .keyword-hint {
            display: block;
            font-size: 0.85em;
            color: #666;
            font-style: italic;
            margin-top: 8px;
            border-top: 1px dashed #ffd1dc;
        }

        .score-board {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            color: #d84361;
            display: none;
        }

        .controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        button {
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .btn-check { background: #d84361; color: white; }
        .btn-check:hover { background: #b7324d; transform: translateY(-2px); }

        @media (max-width: 1100px) {
            .container { grid-template-columns: 1fr; }
            .video-section { position: relative; }
        }
    </style>
</head>
<body>

<header>
    <h1>üå∏ Learn English with Ms. Th√∫y üå∏</h1>
    <p>Ch·ªß ƒë·ªÅ: <b>Cute Aggression</b> - ƒêi·ªÅn t·ª´ v√†o ch·ªó tr·ªëng (40 c√¢u)</p>
</header>

<div class="container">
    <div class="video-section">
        <div class="video-container">
            <div id="player"></div>
        </div>
        
        <div id="score-display" class="score-board"></div>

        <div class="controls">
            <button class="btn-check" onclick="checkAnswers()">Ki·ªÉm tra ƒë√°p √°n & T√≠nh ƒëi·ªÉm</button>
            <button style="background: white; color: #888;" onclick="location.reload()">L√†m l·∫°i b√†i</button>
        </div>
    </div>

    <div class="transcript-section" id="transcript-container"></div>
</div>

<script>
    const transcriptData = [
        { start: 7, end: 10, text: "Watching a kitten <input type='text' data-answer='fumbling'> around,", hint: "l√≥ng ng√≥ng/v·ª•ng v·ªÅ" },
        { start: 10, end: 18, text: "it might feel as if you‚Äôve never <input type='text' data-answer='encountered'> anything so <input type='text' data-answer='devastatingly'> adorable in your <input type='text' data-answer='mortal'> life.", hint: "b·∫Øt g·∫∑p - t·ªôt c√πng - tr·∫ßn th·∫ø" },
        { start: 25, end: 35, text: "But you may also feel the <input type='text' data-answer='conflicting'> <input type='text' data-answer='urge'> to <input type='text' data-answer='squeeze'> or smush the kitten,", hint: "m√¢u thu·∫´n - s·ª± th√¥i th√∫c - n·ª±ng/b√≥p" },
        { start: 36, end: 40, text: "However, you don‚Äôt. And you might be <input type='text' data-answer='appalled'> by yourself.", hint: "kinh h√£i/s·ªëc" },
        { start: 40, end: 51, text: "But this urge, which psychologists call ‚Äúcute aggression,‚Äù is a common <input type='text' data-answer='phenomenon'> <input type='text' data-answer='estimated'> to <input type='text' data-answer='affect'> adults.", hint: "hi·ªán t∆∞·ª£ng - ∆∞·ªõc t√≠nh - ·∫£nh h∆∞·ªüng" },
        { start: 52, end: 57, text: "To better understand this <input type='text' data-answer='peculiar'> case, let's start with what cuteness is.", hint: "k·ª≥ l·∫°/ri√™ng bi·ªát" },
        { start: 58, end: 67, text: "In 1943, one scientist created a baby <input type='text' data-answer='schema'> that <input type='text' data-answer='identified'> key <input type='text' data-answer='features'>.", hint: "l∆∞·ª£c ƒë·ªì - x√°c ƒë·ªãnh - ƒë·∫∑c ƒëi·ªÉm" },
        { start: 67, end: 71, text: "Like plump cheeks, large eyes, and short <input type='text' data-answer='limbs'>.", hint: "chi/tay ch√¢n" },
        { start: 71, end: 79, text: "These <input type='text' data-answer='characteristics'> were placed in <input type='text' data-answer='opposition'> with those <input type='text' data-answer='perceived'> as less cute.", hint: "ƒë·∫∑c t√≠nh - s·ª± ƒë·ªëi l·∫≠p - nh·∫≠n th·ª©c" },
        { start: 80, end: 87, text: "Decades of study have since <input type='text' data-answer='indicated'> that this schema <input type='text' data-answer='reliably'> tracks with us.", hint: "ch·ªâ ra - ƒë√°ng tin c·∫≠y" },
        { start: 92, end: 97, text: "When <input type='text' data-answer='participants'> see images containing more features,", hint: "ng∆∞·ªùi tham gia" },
        { start: 98, end: 104, text: "they <input type='text' data-answer='tend'> to look at them longer and more often.", hint: "c√≥ xu h∆∞·ªõng" },
        { start: 105, end: 111, text: "And the photos appear to <input type='text' data-answer='stimulate'> brain regions associated with reward.", hint: "k√≠ch th√≠ch" },
        { start: 112, end: 115, text: "Cuteness is also thought to <input type='text' data-answer='influence'> behavior.", hint: "·∫£nh h∆∞·ªüng (IELTS)" },
        { start: 115, end: 120, text: "In a 2009 study, people performed better at games <input type='text' data-answer='demanding'> precise movements.", hint: "y√™u c·∫ßu/ƒë√≤i h·ªèi" },
        { start: 121, end: 127, text: "The results indicated that people use <input type='text' data-answer='recycling'> bins more when they have cute images.", hint: "t√°i ch·∫ø" },
        { start: 127, end: 135, text: "The fact that cuteness <input type='text' data-answer='hijacks'> our emotions is not lost on <input type='text' data-answer='advertisers'>.", hint: "kh·ªëng ch·∫ø - nh√† qu·∫£ng c√°o" },
        { start: 135, end: 145, text: "But why? One <input type='text' data-answer='theory'> is that cute things simply make us want to <input type='text' data-answer='nurture'> them.", hint: "l√Ω thuy·∫øt - nu√¥i d∆∞·ª°ng" },
        { start: 146, end: 154, text: "Because human babies are <input type='text' data-answer='relatively'> helpless, evolution <input type='text' data-answer='favored'> cute infants.", hint: "t∆∞∆°ng ƒë·ªëi - ∆∞u √°i" },
        { start: 155, end: 165, text: "And, being <input type='text' data-answer='acutely'> sensitive, we're <input type='text' data-answer='tuned'> into similar features in other species.", hint: "c·ª±c k·ª≥ - nh·∫°y b√©n" },
        { start: 165, end: 171, text: "In fact, as we <input type='text' data-answer='domesticated'> animals, their appearances changed.", hint: "thu·∫ßn h√≥a" },
        { start: 181, end: 188, text: "Where animals gradually adopted more <input type='text' data-answer='juvenile'> features as they became <input type='text' data-answer='docile'>.", hint: "v·ªã th√†nh ni√™n - d·ªÖ b·∫£o" },
        { start: 189, end: 196, text: "These physical changes are <input type='text' data-answer='regulated'> by an <input type='text' data-answer='embryonic'> structure.", hint: "ƒëi·ªÅu ch·ªânh - thu·ªôc ph√¥i thai" },
        { start: 220, end: 230, text: "Friendly dogs look more like babies. Some theorize we <input type='text' data-answer='domesticated'> ourselves.", hint: "thu·∫ßn h√≥a" },
        { start: 246, end: 254, text: "Ancient humans selected for <input type='text' data-answer='friendlier'> individuals.", hint: "th√¢n thi·ªán h∆°n" },
        { start: 255, end: 265, text: "Which led to physical characteristics that <input type='text' data-answer='distinguish'> us.", hint: "ph√¢n bi·ªát" },
        { start: 271, end: 282, text: "Cute aggression is not <input type='text' data-answer='linked'> to the actual <input type='text' data-answer='intention'> to do harm.", hint: "li√™n k·∫øt - √Ω ƒë·ªãnh" },
        { start: 283, end: 289, text: "Instead, it results from emotional <input type='text' data-answer='overload'>.", hint: "qu√° t·∫£i" },
        { start: 290, end: 298, text: "Certain people feel <input type='text' data-answer='overwhelming'> positive emotions.", hint: "tr√†n ng·∫≠p/√°p ƒë·∫£o" },
        { start: 299, end: 309, text: "Aggressive thoughts are the brain's way of <input type='text' data-answer='regulating'> those intense feelings.", hint: "ƒëi·ªÅu ch·ªânh" },
        { start: 310, end: 327, text: "Cuteness <input type='text' data-answer='wields'> immense, <input type='text' data-answer='consequential'> power. It runs the world.", hint: "n·∫Øm gi·ªØ - h·ªá tr·ªçng" }
    ];

    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: 'yxsoE3jO8HM',
            playerVars: { 'autoplay': 0, 'rel': 0, 'modestbranding': 1 },
            events: { 'onReady': onPlayerReady }
        });
    }

    function onPlayerReady() {
        renderTranscript();
        setInterval(updateHighlight, 400);
    }

    function renderTranscript() {
        const container = document.getElementById('transcript-container');
        transcriptData.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'sentence';
            div.id = `s-${index}`;
            // B·ªçc input v√†o wrapper ƒë·ªÉ hi·ªán ƒë√°p √°n ƒë√∫ng b√™n d∆∞·ªõi khi sai
            let processedText = item.text.replace(/<input type='text' data-answer='(.*?)'>/g, (match, p1) => {
                return `<div class="input-wrapper"><input type='text' data-answer='${p1}'><span class="ans-label" style="display:none"></span></div>`;
            });
            div.innerHTML = `${processedText} <div class="keyword-hint">G·ª£i √Ω: ${item.hint}</div>`;
            container.appendChild(div);
        });
    }

    let lastActiveIndex = -1;
    let pausedIndices = new Set();

    function updateHighlight() {
        if (!player || typeof player.getCurrentTime !== 'function') return;
        const currentTime = player.getCurrentTime();
        
        transcriptData.forEach((item, index) => {
            if (currentTime >= item.start && currentTime <= item.end) {
                if (lastActiveIndex !== index) {
                    document.querySelectorAll('.sentence').forEach(s => s.classList.remove('active'));
                    const currentEl = document.getElementById(`s-${index}`);
                    if (currentEl) {
                        currentEl.classList.add('active');
                        currentEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    if (item.text.includes('input') && !pausedIndices.has(index)) {
                        player.pauseVideo();
                        pausedIndices.add(index);
                    }
                    lastActiveIndex = index;
                }
            }
        });
    }

    function checkAnswers() {
        const inputs = document.querySelectorAll('input');
        let correctCount = 0;
        const total = inputs.length;

        inputs.forEach(input => {
            const userAnswer = input.value.trim().toLowerCase();
            const correctAnswer = input.getAttribute('data-answer').toLowerCase();
            const label = input.parentElement.querySelector('.ans-label');

            if (userAnswer === correctAnswer) {
                input.classList.add('correct');
                input.classList.remove('incorrect');
                label.style.display = 'none';
                correctCount++;
            } else {
                input.classList.add('incorrect');
                input.classList.remove('correct');
                // Hi·ªÉn th·ªã ƒë√°p √°n ƒë√∫ng b√™n d∆∞·ªõi √¥ nh·∫≠p
                label.innerHTML = `<span class="correct-answer-label">Key: ${correctAnswer}</span>`;
                label.style.display = 'block';
            }
        });

        const scoreDisplay = document.getElementById('score-display');
        scoreDisplay.style.display = 'block';
        scoreDisplay.innerHTML = `K·∫øt qu·∫£: ${correctCount} / ${total} c√¢u ƒë√∫ng (${Math.round(correctCount/total*100)}%)`;
        scoreDisplay.scrollIntoView({ behavior: 'smooth' });
    }
</script>
</body>
</html>
